<!DOCTYPE html>
<html>
<head>
<style>
body{
  font: 15px helvetica,arial,freesans,clean,sans-serif;
  margin: 20px auto;    
  text-align: center;
}
#waveform{
  background: rgba(0,0,0,0.8);
}

button{
  background: #eee;
  border: 1px solid #ddd;
  border-bottom: 4px solid #ccc;
  cursor: pointer;
  font-size: 20px;
  margin-top: 10px;
  padding: 10px;
}
button:active{
  outline: none;
  border-top: 4px solid #eee;
  border-bottom: 2px solid #777;
}
button:focus{
  outline: none;
}
</style>

<title>WaveSurfer.js - Microphone Plugin Sample</title>
  
</head>

<body>

<h1>Microphone Plugin Sample - wavesurfer.js</h1>
<h4>
  <a target="_blank" href="https://github.com/entonbiba/wavesurfer-microphone-sample">Example reference on github.com</a>
</h4>

<div id="waveform"></div>				

<button class="btn btn-primary" onclick="microphone.start()">
  <i class="glyphicon glyphicon-play"></i>
  Start Mic
</button>

<script>
var wavesurfer = WaveSurfer.create({
    container: '#waveform',
    waveColor: '#D2EDD4',
    progressColor: '#46B54D',
    barHeight: 2
});


var microphone = Object.create(WaveSurfer.Microphone);

microphone.init({
    wavesurfer: wavesurfer
});

microphone.on('deviceReady', function(stream) {
    console.log('Device ready!', stream);
});
microphone.on('deviceError', function(code) {
    console.warn('Device error: ' + code);
});

// pause rendering
//microphone.pause();

// resume rendering
//microphone.play();

// stop visualization and disconnect microphone
//microphone.stopDevice();

// same as stopDevice() but also clears the wavesurfer canvas
//microphone.stop();

// destroy the plugin
//microphone.destroy();
</script>

</body>
</html>
